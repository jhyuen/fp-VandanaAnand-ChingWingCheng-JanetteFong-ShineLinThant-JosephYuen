<!doctype html>
<html lang="en">

<head>
  <title>CS4241 Final Project - Tenant</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="tenantstyle.css" />
  <script src="https://cdn.jsdelivr.net/npm/simple-jscalendar@1.4.4/source/jsCalendar.min.js"
          integrity="sha384-0LaRLH/U5g8eCAwewLGQRyC/O+g0kXh8P+5pWpzijxwYczD3nKETIqUyhuA8B/UB"
          crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-jscalendar@1.4.4/source/jsCalendar.min.css"
        integrity="sha384-44GnAqZy9yUojzFPjdcUpP822DGm1ebORKY8pe6TkHuqJ038FANyfBYBpRvw8O9w" crossorigin="anonymous">
</head>

<body>
  <div class="nav-top">
    <h1 class="welcome">Welcome firstName lastName</h1>
    <button class="logoutBtn" onclick="window.location.href='/login.html'"><i class="fa fa-sign-out"></i></button>
  </div>

  <div class="nav-btn-group">
    <button id="contact" class="button"><i class="fa fa-address-card"></i></button>
    <button id="calendar" class="button"><i class="fa fa-calendar"></i></button>
    <button id="payment" class="button"><i class="fa fa-credit-card"></i></button>
  </div>

  <div class="content">
    <div id="contactScreen">
      <h3>Contact</h3>
    </div>

    <div id="calendarScreen">
      <div class="container">
        <div id="my-calendar" class="material-theme red"></div>
        <div id="events">
          <p id='date'></p>
          <div id="CalPayment"></div>
          <div id="Event"></div>
          <div id="Service"></div>
        </div>
      </div>
    </div>

    <div id="paymentScreen">
      <h3>Payment</h3>
      <div id="getButtons">
        <button onclick="getPayments()">Click Me!</button>

      </div>
      <div id="displayInformation">

      </div>
     </div>
  </div>
  <script>
    function getPayments(){
      fetch('/payments', {
        method:'GET',
      }).then(function(response){
        return response.json()
      }).then(function(listPayment){
        displayDates(listPayment)
      })
    }

    function displayDates(listPayment){
      let finalDates = document.querySelector('#getButtons')
      let str = "";
      for(let pay of listPayment){
        str+='<button id="' + pay.due+ '">' + pay.due + '</button>'
        let btn = document.getElementById(pay.due)
        // btn.onclick = displayInfo(pay)
      }
      finalDates.innerHTML = str;
    }

    function displayInfo(pay){
      let finalInfo = document.querySelector('#displayInformation')
      let str ="";
      str += 'Type:'+pay.desc;
      str += 'Due:'+pay.due;
      str += '<button><a href="https://www.paypal.com/us/for-you/transfer-money/send-money">Pay Here!</a></button>'

      finalInfo.innerHTML += str;
    }

  </script>
  
  <script type="module" src="tenantscript.js"></script>

</body>

</html>